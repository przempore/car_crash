cmake_minimum_required(VERSION 3.14)
project(car_crash)

set(CMAKE_CXX_STANDARD 17)
set(THIRD_PARTY_SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/third_party)
set(THIRD_PARTY_BINARY_DIR ${CMAKE_CURRENT_BINARY_DIR}/third_party)

include(ProcessorCount)
ProcessorCount(PROCESSOR_COUNT)
file(MAKE_DIRECTORY ${THIRD_PARTY_BINARY_DIR} ${THIRD_PARTY_BINARY_DIR}/SFML)
execute_process(COMMAND ${CMAKE_COMMAND} ${THIRD_PARTY_SOURCE_DIR}/SFML -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -GNinja
        WORKING_DIRECTORY ${THIRD_PARTY_BINARY_DIR}/SFML)

execute_process(COMMAND ${CMAKE_COMMAND} --build ${THIRD_PARTY_BINARY_DIR}/SFML --config ${CMAKE_BUILD_TYPE}
        WORKING_DIRECTORY ${THIRD_PARTY_BINARY_DIR}/SFML)

set(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/cmake" ${CMAKE_MODULE_PATH})
set(THIRG_PARTY_DIR ${CMAKE_CURRENT_SOURCE_DIR}/third_party)

add_subdirectory(src)
